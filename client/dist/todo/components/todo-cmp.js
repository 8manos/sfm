"use strict";var __decorate=this&&this.__decorate||function(e,o,t,i){var s,r=arguments.length,n=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,o,t,i);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(n=(r<3?s(n):r>3?s(o,t,n):s(o,t))||n);return r>3&&n&&Object.defineProperty(o,t,n),n},__metadata=this&&this.__metadata||function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),todo_service_1=require("../services/todo-service"),geolocation_service_1=require("../services/geolocation-service"),TodoCmp=function(){function e(e,o){this._todoService=e,this.geolocation=o,this.title="UNAUTHORIZED SFMOMA SHOW",this.todos=[],this.center="Undisclosed Location",this.todoForm={todoMessage:""}}return e.prototype.ngOnInit=function(){this._getAll(),this.getCurrentPosition()},e.prototype._getAll=function(){var e=this;this._todoService.getAll().subscribe(function(o){e.todos=o})},e.prototype.add=function(e){var o=this;this._todoService.add(e).subscribe(function(e){o.todos.push(e),o.todoForm.todoMessage=""})},e.prototype.remove=function(e){var o=this;this._todoService.remove(e).subscribe(function(){o.todos.forEach(function(t,i){if(t._id===e)return o.todos.splice(i,1)})})},e.prototype.getCurrentPosition=function(){var e=this;this.located=!1,this.warning=!1,this.message="",navigator.geolocation?(console.log("Getting position"),this.geolocation.getCurrentPosition().forEach(function(o){e.center=o.coords.latitude+":"+o.coords.longitude,e.zoom="11",e.message="location detected",e.warning=!0,e.located=!0},null).then(function(){return console.log("Geolocation service: completed.")})["catch"](function(o){if(o.code>0){switch(o.code){case o.PERMISSION_DENIED:e.message="permission denied";break;case o.POSITION_UNAVAILABLE:e.message="position unavailable";break;case o.TIMEOUT:e.message="position timeout"}e.warning=!0}})):(this.message="browser doesn't support geolocation",this.warning=!0)},e}();TodoCmp=__decorate([core_1.Component({selector:"todo-cmp",templateUrl:"todo/templates/todo.html",styleUrls:["todo/styles/todo.css"]}),__metadata("design:paramtypes",[todo_service_1.TodoService,geolocation_service_1.GeolocationService])],TodoCmp),exports.TodoCmp=TodoCmp;